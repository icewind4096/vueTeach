<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<script type="text/javascript" src="./common/vue.js"></script>

<link rel="stylesheet" href="./common/iconfont.css">

<style>
    :root{
        --pinHeight: 18px;
        --pinWidth: 78px;
        --pin2Edge: 25px;
        --pin2pinOffset: 10px;
        --func2funcOffset: 28px;
        --pinnumwidth: 16px;

        --bodyOffsetX: 300px;
        --bodyLogoFontName: 'Courier New', Courier, monospace;
        --bodyBoardWidth: 1px;
        --bodyBoardColor: black;

        --logoChipName2LeftEdge: 80px;
        --logoChipName2TopEdge: 238px;
        --logoChipNameFontSize: 32px;
        --logoChipNameFontName: Arial, Helvetica, sans-serif;

        --logoChipNameUnderLineWidth: 280px;
        --logoChipNameUnderLineHeight: 2px;
        --logoChipNameUnderLineColor: black;

        --logoChipManu2LeftEdge: 80px;
        --logoChipManu2TopEdge: 238px;
        --logoChipManuFontSize: 32px;
        --logoChipManuFontName: Arial, Helvetica, sans-serif; 

        --pinLeftPad: 2px;
    }

    *{
        padding: 0px;
        margin: 0px;
    }

    .chipbodylqfp{
        position: relative;
        font-family: var(--bodyLogoFontName);
        font-size: 12px;
        margin: var(--bodyOffsetX) auto;
        border: var(--bodyBoardWidth) solid var(--bodyBoardColor);
        height: calc((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge));
        width: calc((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge));
        background: linear-gradient(to bottom right, black, grey, #909090 , #303030);
        /* background: linear-gradient(150deg,white, black); */
        /* transform: scale(1.5);              */
        /* transform:rotate(45deg); */
    }

    .chiplogoname{
        position:absolute;
        left: var(--logoChipName2LeftEdge); 
        top: var(--logoChipName2TopEdge); 
        font-family: var(--logoChipNameFontName);
        font-size: var(--logoChipNameFontSize);
    }

    .chiplogonameunderline{
        position:absolute;
        background-color: var(--logoChipNameUnderLineColor);
        left: var(--logoChipName2LeftEdge);
        top: calc(var(--logoChipName2TopEdge) + var(--logoChipNameFontSize)); 
        height: var(--logoChipNameUnderLineHeight);
        width: var(--logoChipNameUnderLineWidth);
    }

    .chiplogomanufacturer{
        position: absolute; 
        left: var(--logoChipManu2LeftEdge);
        top: calc(var(--logoChipName2TopEdge) + var(--logoChipNameFontSize) + var(--logoChipNameUnderLineHeight)); 
        font-family: var(--logoChipManuFontName);
        font-size: var(--logoChipManuFontSize);
        background: linear-gradient(215deg,blue, gold);
        -webkit-text-fill-color:transparent;
        -webkit-background-clip: text;            
    }

    .unvisiable{
        visibility: hidden;
     }

     .vddpin{
        background-color: red; 
    }

    .vsspin{
        color: white !important;
        background-color: black; 
    }

    .vddapin{
        background-color: rgba(255, 0, 0, 0.5)
    }

    .vssapin{
        background-color: rgba(0, 0, 0, 0.5)
    }

    .nrstpin{
        background-color:rgba(128, 128, 128, 0.5)
    }

    .bootpin{
        background-color: blue;
    }

    .gpioa{
        background-color:rgba(216, 92, 87, 0.4); 
    }

    .gpiob{
        background-color:rgba(84, 56, 245, 0.4); 
    }

    .gpioc{
        background-color:rgba(100, 17, 107, 0.4); 
    }

    .gpiod{
        background-color:rgba(217, 243, 158, 0.4); 
    }

    .gpioe{
        background-color:rgba(235, 41, 50, 0.4); 
    }

    .gpiof{
        background-color:rgba(240, 83, 21, 0.4); 
    }

    .gpiog{
        background-color:rgba(139, 163, 155, 0.4); 
    }

    .gpioh{
        background-color:rgba(207, 21, 161, 0.4); 
    }

    .roatte90{
        transform: rotate(90deg);
    }

    .nroatte90{
        transform: rotate(-90deg);
        transform-origin: 0 0;
    }

    .pinrect{
        position: absolute;
        height: calc((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset));
        width: calc(var(--pinWidth) + 4 * var(--bodyBoardWidth));     
        /* background-color:red; */
    }

    .pinrectV{
        top: var(--pin2Edge);
    }

    .pinrectstyle{
        list-style: none;
     }

     .leftpinnumbrect{
         left: 0px;
         width: var(--pinnumwidth)
     }

     .rightpinnumbrect{
         /* left: calc((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge) - var(--pinnumwidth)); */
         left: calc((var(--widthRate) * ((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge))) - var(--pinnumwidth));
         width: var(--pinnumwidth);
     }

     .buttonpinnumbrect{
        left: var(--pin2Edge);
        width: var(--pinnumwidth);
        top: calc((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge));
     }

     .toppinnumbrect{
        left: var(--pin2Edge);
        top: var(--pinnumwidth);
        width: var(--pinnumwidth);
        /* background-color: cornflowerblue; */
     }

     .leftpinnamerect{
        left: calc(0px - 4 * var(--bodyBoardWidth) - var(--pinWidth));
        /* background-color: violet; */
     }

     .rightnamerect{
        /* left: calc((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge)); */
        left: calc(var(--widthRate) * ((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge)));
        /* background-color: violet; */
    }

    .buttonnamerect{
        left: var(--pin2Edge);
        top: calc((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge) + var(--pinWidth) + 4 * var(--bodyBoardWidth));
        /* background-color: violet; */
    }

    .topnamerect{
        left: var(--pin2Edge);
        top: 0px;
        /* background-color: cornflowerblue; */
    }

     .leftpinafrect{
        left: calc(0px - 4 * var(--bodyBoardWidth) - 2 * var(--pinWidth) - var(--func2funcOffset));
        /* background-color: violet; */
     }

     .rightpinafrect{
        /* left: calc((((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge)) + var(--pinWidth) + 4 * var(--bodyBoardWidth) + var(--func2funcOffset))); */
        left: calc((var(--widthRate) * ((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge))) + var(--pinWidth) + 4 * var(--bodyBoardWidth) + var(--func2funcOffset));
        /* background-color: violet; */
     }

     .buttonpinafrect{
        left: var(--pin2Edge);
        top: calc((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge) + var(--pinWidth) + 4 * var(--bodyBoardWidth) + 1px + var(--pinWidth) + var(--func2funcOffset));
        /* background-color: violet; */
     }

     .toppinafrect{
        left: var(--pin2Edge);
        top: calc(0px - (var(--pin2Edge) + var(--pinWidth) + var(--func2funcOffset)));
        /* background-color: chocolate; */
     }

     .pincell{
        border: 1px solid black;
        color: black;
     }

     .pinnumcell{
        height: var(--pinHeight);
        line-height: var(--pinHeight);
        margin-bottom: var(--pin2pinOffset);
        border: 1px solid rgba(0, 0, 0, 0);     /*不想重新计算位置，还是画边框，但是边框全透明*/
        color: white;
     }

     .pinname{
        width: var(--pinWidth);
        height: var(--pinHeight);
        line-height: var(--pinHeight);
        margin-bottom: var(--pin2pinOffset);
    }

    .pinaf{
        width: var(--pinWidth);
        height: var(--pinHeight);
        line-height: var(--pinHeight);
        margin-bottom: var(--pin2pinOffset);
        color: white;
        background-color: indianred;
    }

    .pinrightcell{
        padding-right: var(--pinLeftPad);
        text-align: right;
    }

    .pinrightcell:hover{
        box-shadow: 1px 3px #909090;
        color: white;
        background-color: rgba(32, 64, 128, 0.5);
    }

    .pinleftcell{
        padding-left: var(--pinLeftPad);
        text-align: left;
    }

    .pincentercell{
        text-align: center;
    }

    /*=========== chipbodytssop =========================================*/
    .chipbodytssop{
            position: relative;
            font-family: var(--bodyLogoFontName);
            font-size: 12px;
            margin: var(--bodyOffsetX) auto;
            border: var(--bodyBoardWidth) solid var(--bodyBoardColor);
            height: calc((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge));
            width: calc(var(--widthRate) * ((var(--pinCount) / var(--sideCount)) * (var(--pinHeight) + var(--pin2pinOffset) + var(--bodyBoardWidth) * 2) - var(--pin2pinOffset) + 2 * var(--pin2Edge)));
            background: linear-gradient(to bottom right, black, grey, #909090 , #303030);
            /* background: linear-gradient(150deg,white, black); */
            /* transform: scale(1.5);              */
            /* transform:rotate(45deg); */
    }
</style>    

<body>
    <div id="root">
        <!-- 旋转 -->
        <div style="position: fixed; top:50px; right:50px;">
            <span class="iconfont icon-xiangzuoxuanzhuan" style="font-weight: 400; font-size:32px;" @click="rotateleft(90)"></span>
            <span class="iconfont icon-xiangyouxuanzhuan" style="font-weight: 400; font-size:32px;" @click="rotateright(90)"></span>

            <label>pin脚数量</label><input type="text" @input="redrawchip"><br/>
            
            <label>长宽比，只在tssop下有效</label><input type="text" @input="changewidthrate" v-bind:disabled="chipinfo.package != 2"><br/>

            <label>封装样式</label>
            <select id="packagename" @change="changepackage">
                <option>LQFP</option>
                <option>TSSOP</option>
            </select><br/>
            <input type="checkbox" v-model="chipinfo.displaylogoname" id='dislogoname'><label for="dislogoname">显示logo-产品名称</label><br/>
            <input type="checkbox" v-model="chipinfo.displaylogoline" id='dislogoline'><label for="dislogoline">显示logo-横线</label><br/>
            <input type="checkbox" v-model="chipinfo.displaylogomanu" id='dislogomanu'><label for="dislogomanu">显示logo-制造商</label><br/>
        </div>
        <!--  LQFP 主体 -->
        <div v-if="showchip === true" :class="chipinfo.chipbody" :style="chiplookstyle">
            <!-- logo -->
            <div v-if="(showchip === true) && (chipinfo.package === 1) && (chipinfo.displaylogoname === true)" class="chiplogoname">{{chipinfo.name}}</div>
            <div v-if="(showchip === true) && (chipinfo.package === 1) && (chipinfo.displaylogoline === true)" class="chiplogonameunderline"></div>
            <div v-if="(showchip === true) && (chipinfo.package === 1) && (chipinfo.displaylogomanu === true)" class="chiplogomanufacturer">{{chipinfo.manufacturer}}</div>

            <!-- 左边pin脚 -->
            <div class="pinrect pinrectV leftpinnumbrect">
                <ul class="pinrectstyle"> 
                    <li class="pinrightcell pinnumcell" v-for="(item,index) in leftpins" :key="index">{{item.id}}</li>
                </ul>
            </div>
            
            <div class="pinrect pinrectV leftpinnamerect">
                <ul class="pinrectstyle"> 
                    <li class="pincell pinname pinrightcell" :class="pintypeclass4name(item)" v-for="(item,index) in leftpins" :key="index">{{item.name}}</li>
                    <!-- <li class="pincell pinname pincentercell" :class="pintypeclass4name(item)" v-for="(item,index) in leftpins" :key="index">{{item.name}}</li> -->
                </ul>
            </div>

            <div class="pinrect pinrectV leftpinafrect">
                <ul class="pinrectstyle"> 
                    <li class="pincell pinaf pinleftcell" :class="pintypeclass4af(item)" v-for="(item,index) in leftpins" :key="index">{{item.AFs === undefined ? '' : item.AFs[0].name}}</li>
                </ul>
            </div> 

            <!-- 底部pin脚 -->
            <div v-if="chipinfo.package === 1" class="pinrect pinrectV nroatte90 buttonpinnumbrect ">
                <ul class="pinrectstyle"> 
                    <li class="pinrightcell pinnumcell" v-for="(item,index) in bottompins" :key="index">{{item.id}}</li>
                </ul>
            </div>

            <div v-if="chipinfo.package === 1" class="pinrect pinrectV nroatte90 buttonnamerect">
                <ul class="pinrectstyle"> 
                    <li class="pincell pinname pinrightcell" :class="pintypeclass4name(item)" v-for="(item,index) in bottompins" :key="index">{{item.name}}&nbsp;</li>
                </ul>
            </div>

            <div v-if="chipinfo.package === 1" class="pinrect pinrectV nroatte90 buttonpinafrect">
                <ul class="pinrectstyle"> 
                    <li class="pincell pinaf pinleftcell" :class="pintypeclass4af(item)" v-for="(item,index) in bottompins" :key="index">{{item.AFs === undefined ? '' : item.AFs[0].name}}</li>
                </ul>
            </div>

            <!-- 右边pin脚 -->
            <div class="pinrect pinrectV rightpinnumbrect">
                <ul class="pinrectstyle"> 
                    <li class="pinrightcell pinnumcell" v-for="(item,index) in rightpins" :key="index">{{item.id}}</li>
                </ul>
            </div>
            
            <div class="pinrect pinrectV rightnamerect">
                <ul class="pinrectstyle"> 
                    <li class="pincell pinname pinleftcell" :class="pintypeclass4name(item)" v-for="(item,index) in rightpins" :key="index">{{item.name}}</li>
                </ul>
            </div>

            <div class="pinrect pinrectV rightpinafrect">
                <ul class="pinrectstyle"> 
                    <li class="pincell pinaf pinrightcell" :class="pintypeclass4af(item)" v-for="(item,index) in rightpins" :key="index">{{item.AFs === undefined ? '' : item.AFs[0].name}}</li>
                </ul>
            </div>  

            <!-- 上部pin脚 -->
            <div v-if="chipinfo.package === 1" class="pinrect pinrectV nroatte90 toppinnumbrect ">
                <ul class="pinrectstyle"> 
                    <li class="pinrightcell pinnumcell" v-for="(item,index) in toppins" :key="index">{{item.id}}</li>
                </ul>
            </div>

            <div v-if="chipinfo.package === 1" class="pinrect pinrectV nroatte90 topnamerect">
                <ul class="pinrectstyle"> 
                    <li class="pincell pinname pinrightcell" :class="pintypeclass4name(item)" v-for="(item,index) in toppins" :key="index">{{item.name}}&nbsp;</li>
                </ul>
            </div>

            <div v-if="chipinfo.package === 1" class="pinrect pinrectV nroatte90 toppinafrect">
                <ul class="pinrectstyle"> 
                    <li class="pincell pinaf pinrightcell" :class="pintypeclass4af(item)" v-for="(item,index) in toppins" :key="index">{{item.AFs === undefined ? '' : item.AFs[0].name}}</li>
                </ul>
            </div>
        </div>

        <!-- TSSOP 主体 -->
        <!-- <div v-if="(showchip === true) && (chipinfo.package === 2)" class="chipbodytssop" :style="chiplookstyle">
            <div class="pinrect pinrectV leftpinnumbrect">
                <ul class="pinrectstyle"> 
                    <li class="pinrightcell pinnumcell" v-for="(item,index) in leftpins" :key="index">{{item.id}}</li>
                </ul>
            </div>
            
            <div class="pinrect pinrectV leftpinnamerect">
                <ul class="pinrectstyle"> 
                    <li class="pincell pinname pinrightcell" :class="pintypeclass4name(item)" v-for="(item,index) in leftpins" :key="index">{{item.name}}</li>
                </ul>
            </div>

            <div class="pinrect pinrectV leftpinafrect">
                <ul class="pinrectstyle"> 
                    <li class="pincell pinaf pinleftcell" :class="pintypeclass4af(item)" v-for="(item,index) in leftpins" :key="index">{{item.AFs === undefined ? '' : item.AFs[0].name}}</li>
                </ul>
            </div> 

            <div class="pinrect pinrectV rightpinnumbrect">
                <ul class="pinrectstyle"> 
                    <li class="pinrightcell pinnumcell" v-for="(item,index) in rightpins" :key="index">{{item.id}}</li>
                </ul>
            </div>
            
            <div class="pinrect pinrectV rightnamerect">
                <ul class="pinrectstyle"> 
                    <li class="pincell pinname pinleftcell" :class="pintypeclass4name(item)" v-for="(item,index) in rightpins" :key="index">{{item.name}}</li>
                </ul>
            </div>

            <div class="pinrect pinrectV rightpinafrect">
                <ul class="pinrectstyle"> 
                    <li class="pincell pinaf pinrightcell" :class="pintypeclass4af(item)" v-for="(item,index) in rightpins" :key="index">{{item.AFs === undefined ? '' : item.AFs[0].name}}</li>
                </ul>
            </div>  
        </div> -->
    </div>
</body>

<script type="text/javascript">
    const vm = new Vue({
        el: "#root",
        data:{
            rotateedge: 0,
            showchip: false,
            chiplookstyle:{
                transform: '',
            },
            chipinfo:{
                name: 'MM32F0131C7P',
                manufacturer: 'MindMotion',

                pincount: 64,
                package: 1, //type: 0-reserve 1-lqfp 2-tssop 3 qfn 4 bga

                chipbody: 'chipbodylqfp',
                displaylogoname: true,
                displaylogoline: true,
                displaylogomanu: true,

                // pincount: 20,
                // package: 2, //type: 0-reserve 1-lqfp 2-tssop 3 qfn 4 bga

                pins:[
                     {id: 1,  name:'PD7', type: 1, AFs:[{idx: 5, name:"TIM3_CH1"},{idx: 6, name:"TIM17_CH1"}]}
                    ,{id: 2,  name:'PC13',type: 1, AFs:[{idx: 6, name:"TIM2_CHR"}]}
                    ,{id: 3,  name:'PC14',type: 1, AFs:[{idx: 6, name:"TIM2_CH2"}]}
                    ,{id: 4,  name:'PC15',type: 1, AFs:[{idx: 6, name:"TIM2_CH3"}]}
                    ,{id: 5,  name:'PD0', type: 1, AFs:[{idx: 1, name:"I2C1_SDA"},{idx: 2, name:"TIM1_CH1N"},{idx: 3, name:"UART1_TX"},{idx: 4, name:"TIM1_CH2"},{idx: 5, name:"SPI1_MOSI"}]}
                    ,{id: 6,  name:'PD1', type: 1, AFs:[{idx: 1, name:"TIM1_BKIN"},{idx: 2, name:"I2C1_SCL"},{idx: 3, name:"TIM1_CH1"},{idx: 4, name:"UART1_RX"},{idx: 5, name:"TIM1_CH2"},{idx: 6, name:"SPI1_MISO"},{idx: 5, name:"SPI1_SCK"}]}
                    ,{id: 7,  name:'nRST',type: 6}
                    ,{id: 8,  name:'PC0', type: 1}
                    ,{id: 9,  name:'PC1', type: 1}
                    ,{id: 10, name:'PC2', type: 1, AFs:[{idx: 1, name:"SPI2_MISO"}]}
                    ,{id: 11, name:'PC3', type: 1, AFs:[{idx: 1, name:"SPI2_MOSI"}]}
                    ,{id: 12, name:'VSSA',type: 4}
                    ,{id: 13, name:'VDDA',type: 5}
                    ,{id: 14, name:'PA0', type: 1, AFs:[{idx: 1, name:"UART2_CTS"},{idx: 2, name:"TIM2_CH1"},{idx: 4, name:"UART1_RX"},{idx: 6, name:"TIM14_CH1"},{idx: 7, name:"COMP1_OUT"}]}
                    ,{id: 15, name:'PA1', type: 1, AFs:[{idx: 1, name:"UART2_RTS"},{idx: 2, name:"TIM2_CH2"},{idx: 3, name:"TIM1_CH2"},{idx: 4, name:"UART1_TX"}]}
                    ,{id: 16, name:'PA2', type: 1, AFs:[{idx: 1, name:"UART2_TX"},{idx: 2, name:"TIM2_CH3"},{idx: 3, name:"TIM1_CH2N"},{idx: 7, name:"COMP2_OUT"}]}
                    ,{id: 17, name:'PA3', type: 1, AFs:[{idx: 1, name:"UART2_RX"},{idx: 2, name:"TIM2_CH4"},{idx: 3, name:"TIM1_CH3"}]}
                    ,{id: 18, name:'PD4', type: 1, AFs:[{idx: 0, name:"SPI1_MISO"},{idx: 1, name:"SPI2_MOSI"}]}
                    ,{id: 19, name:'PD5', type: 1, AFs:[{idx: 0, name:"SPI1_MOSI"},{idx: 1, name:"SPI2_MISO"}]}
                    ,{id: 20, name:'PA4', type: 1, AFs:[{idx: 0, name:"SPI1_NSS"},{idx: 1, name:"SPI1_SCK"},{idx: 3, name:"TIM1_CH3N"},{idx: 4, name:"TIM14_CH1"},{idx: 5, name:"TIM1_BNIN"}]}
                    ,{id: 21, name:'PA5', type: 1, AFs:[{idx: 0, name:"SPI1_SCK"},{idx: 1, name:"SPI1_NSS"},{idx: 2, name:"TIM2_CH1"},{idx: 6, name:"TIM3_CH3N"}]}
                    ,{id: 22, name:'PA6', type: 1, AFs:[{idx: 0, name:"SPI1_MISO"},{idx: 1, name:"TIM3_CH1"},{idx: 2, name:"TIM1_BKIN"},{idx: 5, name:"TIM16_CH1"},{idx: 6, name:"TIM1_CH3"},{idx: 7, name:"COMP1_OUT"}]}
                    ,{id: 23, name:'PA7', type: 1, AFs:[{idx: 0, name:"SPI1_MOSI"},{idx: 1, name:"TIM3_CH2"},{idx: 2, name:"TIM1_CH1N"},{idx: 3, name:"TIM1_CH3N"},{idx: 4, name:"TIM14_CH1"},{idx: 5, name:"TIM17_CH1"},{idx: 6, name:"TIM1_CH2N"},{idx: 7, name:"COMP2_OUT"}]}
                    ,{id: 24, name:'PC4', type: 1, AFs:[{idx: 3, name:"UART2_TX"},{idx: 5, name:"TIM3_CH1"},{idx: 6, name:"SPI1_MOSI"}]}
                    ,{id: 25, name:'PC5', type: 1, AFs:[{idx: 3, name:"UART2_RX"},{idx: 5, name:"TIM3_CH2"},{idx: 6, name:"SPI1_MISO"}]}
                    ,{id: 26, name:'PB0', type: 1, AFs:[{idx: 1, name:"TIM3_CH3"},{idx: 2, name:"TIM1_CH2N"},{idx: 3, name:"TIM1_CH1N"},,{idx: 4, name:"TIM1_CH3"}]}
                    ,{id: 27, name:'PB1', type: 1, AFs:[{idx: 0, name:"TIM14_CH1"},{idx: 1, name:"TIM3_CH4"},{idx: 2, name:"TIM1_CH3N"},{idx: 3, name:"TIM1_CH2N"},{idx: 4, name:"TIM2_CH3"},{idx: 5, name:"TIM1_CH2"},{idx: 6, name:"TIM1_CH1N"}]}
                    ,{id: 28, name:'PB2', type: 1}
                    ,{id: 29, name:'PB10',type: 1, AFs:[{idx: 1, name:"I2C1_SCL"},{idx: 2, name:"TIM2_CH3"},{idx: 5, name:"SPI2_SCK"}]}
                    ,{id: 30, name:'PB11',type: 1, AFs:[{idx: 1, name:"I2C1_SDA"},{idx: 2, name:"TIM2_CH4"}]}
                    ,{id: 31, name:'VSS', type: 3}
                    ,{id: 32, name:'VDD', type: 2}
                    ,{id: 33, name:'PB12',type: 1, AFs:[{idx: 0, name:"SPI2_NSS"},{idx: 1, name:"SPI2_SCK"},{idx: 2, name:"TIM1_BKIN"},{idx: 3, name:"SPI2_MOSI"},{idx: 4, name:"SPI2_MISO"}]}
                    ,{id: 34, name:'PB13',type: 1, AFs:[{idx: 0, name:"SPI2_SCK"},{idx: 1, name:"SPI2_MISO"},{idx: 2, name:"TIM1_CH1N"},{idx: 3, name:"SPI2_NSS"},{idx: 4, name:"SPI2_MOSI"},{idx: 5, name:"I2C1_SCL"},{idx: 6, name:"TIM17_CH1"},{idx: 7, name:"TIM1_CH3N"}]}
                    ,{id: 35, name:'PB14',type: 1, AFs:[{idx: 0, name:"SPI2_MISO"},{idx: 1, name:"SPI2_MOSI"},{idx: 2, name:"TIM1_CH2N"},{idx: 3, name:"SPI2_SCK"},{idx: 4, name:"SPI2_NSS"},{idx: 5, name:"I2C1_SDA"},{idx: 6, name:"TIM1_CH3"},{idx: 7, name:"TIM1_CH1"}]}
                    ,{id: 36, name:'PB15',type: 1, AFs:[{idx: 0, name:"SPI2_MOSI"},{idx: 1, name:"SPI2_NSS"},{idx: 2, name:"TIM1_CH3N"},{idx: 3, name:"SPI2_MISO"},{idx: 4, name:"SPI2_SCK"},{idx: 6, name:"TIM1_CH2N"},{idx: 7, name:"TIM1_CH2"}]}
                    ,{id: 37, name:'PC6', type: 1, AFs:[{idx: 1, name:"TIM3_CH1"},{idx: 6, name:"TIM3_CH3"},{idx: 7, name:"SPI1_NSS"}]}
                    ,{id: 38, name:'PC7', type: 1, AFs:[{idx: 1, name:"TIM3_CH2"},{idx: 6, name:"TIM2_CH1"},{idx: 7, name:"SPI1_SCK"}]}
                    ,{id: 39, name:'PC8', type: 1, AFs:[{idx: 1, name:"TIM3_CH3"},{idx: 6, name:"TIM2_CH2"}]}
                    ,{id: 40, name:'PC9', type: 1, AFs:[{idx: 1, name:"TIM3_CH4"},{idx: 6, name:"TIM2_CH3"}]}
                    ,{id: 41, name:'PA8', type: 1, AFs:[{idx: 0, name:"MCO"},{idx: 2, name:"TIM1_CH1"},{idx: 6, name:"TIM1_CH2"},{idx: 7, name:"TIM1_CH3"}]}
                    ,{id: 42, name:'PA9', type: 1, AFs:[{idx: 1, name:"UART1_TX"},{idx: 2, name:"TIM1_CH2"},{idx: 3, name:"UART1_RX"},{idx: 4, name:"I2C1_SCL"},{idx: 5, name:"MCO"},{idx: 6, name:"TIM1_CH1N"}]}
                    ,{id: 43, name:'PA10',type: 1, AFs:[{idx: 0, name:"TIM17_BKIN"},{idx: 1, name:"UART1_RX"},{idx: 2, name:"TIM1_CH3"},{idx: 3, name:"UART1_TX"},{idx: 4, name:"I2C1_SDA"},{idx: 5, name:"TIM1_CH1"},{idx: 6, name:"TIM16_CH1"}]}
                    ,{id: 44, name:'PA11',type: 1, AFs:[{idx: 1, name:"UART1_CTS"},{idx: 2, name:"TIM1_CH4"},{idx: 3, name:"TIM1_CH3"},{idx: 4, name:"CAN1_RX"},{idx: 5, name:"I2C1_SCL"},{idx: 6, name:"TIM1_BKIN"},{idx: 6, name:"COMP1_OUT"}]}
                    ,{id: 45, name:'PA12',type: 1, AFs:[{idx: 1, name:"UART1_RTS"},{idx: 2, name:"TIM1_ETR"},{idx: 3, name:"TIM1_CH3N"},{idx: 4, name:"CAN1_TX"},{idx: 5, name:"I2C1_SDA"},{idx: 6, name:"TIM1_CH2"},{idx: 6, name:"COMP2_OUT"}]}
                    ,{id: 46, name:'PA13',type: 1, AFs:[{idx: 0, name:"SWDIO"},{idx: 3, name:"UART1_TX"}]}
                    ,{id: 47, name:'PD2', type: 1, AFs:[{idx: 1, name:"I2C1_SCL"},{idx: 5, name:"SPI1_NSS"},{idx: 6, name:"SPI1_NSS"}]}
                    ,{id: 48, name:'PD3', type: 1, AFs:[{idx: 1, name:"I2C1_SDA"},{idx: 5, name:"SPI1_SCK"},{idx: 6, name:"SPI1_NSS"}]}
                    ,{id: 49, name:'PA14',type: 1, AFs:[{idx: 0, name:"SWDCLK"},{idx: 1, name:"UART2_TX"},{idx: 3, name:"UART1_RX"}]}
                    ,{id: 50, name:'PA15',type: 1, AFs:[{idx: 0, name:"SPI1_NSS"},{idx: 1, name:"UART2_RX"},{idx: 2, name:"TIM2_CH1"},{idx: 3, name:"SPI2_SCK"},{idx: 4, name:"SPI2_MOSI"},{idx: 5, name:"SPI2_MISO"},{idx: 6, name:"TIM1_CH1N"},{idx: 7, name:"TIM1_CH3N"}]}
                    ,{id: 51, name:'PC10',type: 1, AFs:[{idx: 0, name:"UART1_TX"},{idx: 3, name:"SPI2_MISO"},{idx: 4, name:"SPI2_SCK"},{idx: 5, name:"SPI2_NSS"},{idx: 6, name:"SPI2_MOSI"},{idx: 7, name:"COMP2_OUT"}]}
                    ,{id: 52, name:'PC11',type: 1, AFs:[{idx: 0, name:"UART1_RX"},{idx: 3, name:"SPI2_MOSI"},{idx: 4, name:"SPI2_NSS"},{idx: 5, name:"SPI2_SCK"},{idx: 6, name:"SPI2_MISO"}]}
                    ,{id: 53, name:'PC12',type: 1, AFs:[{idx: 0, name:"UART1_TX"},{idx: 3, name:"SPI2_SCK"},{idx: 4, name:"SPI2_MISO"},{idx: 5, name:"SPI2_MOSI"},{idx: 6, name:"SPI2_NSS"}]}
                    ,{id: 54, name:'PD6', type: 1, AFs:[{idx: 1, name:"TIM3_ETR"},{idx: 3, name:"TIM1_CH3N"},{idx: 5, name:"TIM1_CH1"},{idx: 6, name:"TIM1_CH1N"}]}
                    ,{id: 55, name:'PB3', type: 1, AFs:[{idx: 0, name:"SPI1_SCK"},{idx: 2, name:"TIM2_CH2"},{idx: 4, name:"TIM1_CH1"},{idx: 6, name:"TIM1_CH2N"},{idx: 7, name:"TIM1_CH3"}]}
                    ,{id: 56, name:'PB4', type: 1, AFs:[{idx: 0, name:"SPI1_MISO"},{idx: 1, name:"TIM3_CH1"},{idx: 4, name:"TIM1_CH2"},{idx: 5, name:"TIM17_BKIN"},{idx: 6, name:"TIM1_CH3N"},{idx: 7, name:"TIM1_CH2N"}]}
                    ,{id: 57, name:'PB5', type: 1, AFs:[{idx: 0, name:"SPI1_MOSI"},{idx: 1, name:"TIM3_CH2"},{idx: 2, name:"TIM16_BKIN"},{idx: 6, name:"TIM1_CH1"},{idx: 7, name:"TIM1_CH2"}]}
                    ,{id: 58, name:'PB6', type: 1, AFs:[{idx: 0, name:"UART1_TX"},{idx: 1, name:"I2C1_SCL"},{idx: 2, name:"TIM16_CH1N"},{idx: 4, name:"TIM1_CH2N"},{idx: 6, name:"TIM1_CH2"},{idx: 7, name:"TIM1_CH1N"}]}
                    ,{id: 59, name:'PB7', type: 1, AFs:[{idx: 0, name:"UART1_RX"},{idx: 1, name:"I2C1_SDA"},{idx: 2, name:"TIM17_CH1N"},{idx: 6, name:"TIM1_CH3"},{idx: 7, name:"TIM1_CH1"}]}
                    ,{id: 60, name:'BOOT0',type: 7}
                    ,{id: 61, name:'PB8', type: 1, AFs:[{idx: 0, name:"UART1_RX"},{idx: 1, name:"I2C1_SCL"},{idx: 2, name:"TIM16_CH1"},{idx: 3, name:"TIM1_CH1"},{idx: 4, name:"CAN1_RX"},{idx: 6, name:"TIM3_CH2"}]}
                    ,{id: 62, name:'PB9', type: 1, AFs:[{idx: 0, name:"UART1_TX"},{idx: 1, name:"I2C1_SDA"},{idx: 2, name:"TIM17_CH1"},{idx: 4, name:"CAN1_TX"},{idx: 5, name:"SPI2_NSS"},{idx: 6, name:"TIM3_CH3"}]}
                    ,{id: 63, name:'VSS', type: 3}
                    ,{id: 64, name:'VDD', type: 2}
                ]         
            },
            //type: 1-gpio 2-vdd 3-vss 4-vdda 5-vdds 6-nRst, 7-boot
            class4pintype: ['', 'gpio','vddpin','vsspin','vddapin','vssapin','nrstpin', 'bootpin'],
            class4pinaftype: ['', 'unvisiable'],
        },
        computed: {
            widthrate:{
                get(){
                    if (this.chipinfo.package === 2){
                        return 0.618;
                    }
                    return 1;
                }
            },
            sidecount:{
                get(){
                    if (this.chipinfo.package === 2){
                        return 2;
                    } else {
                        return 4;
                    }
                }
            },
            sidepincount: {
                get(){
                    return this.chipinfo.pincount / this.sidecount;                
                }
            },
            leftpins:{
                get(){
                    return this.chipinfo.pins.slice(0, this.sidepincount * 1)
                }
            },
            bottompins:{
                get(){
                    return this.chipinfo.pins.slice(this.sidepincount * 1, this.sidepincount * 2)
                }
            },
            rightpins:{
                get(){
                    if (this.chipinfo.package === 2){
                        return this.chipinfo.pins.slice(this.sidepincount * 1, this.sidepincount * 2).reverse()
                    }
                    return this.chipinfo.pins.slice(this.sidepincount * 2, this.sidepincount * 3).reverse()
                }
            },
            toppins:{
                get(){
                    return this.chipinfo.pins.slice(this.sidepincount * 3, this.sidepincount * 4).reverse()
                }
            },
        },
        created() {
        },
        mounted() {
        },
        // ^P[ABCDEFGH]\d+$
        methods: {
            pintypeclass4name(value){
                if (value.type === 1){
                    return this.class4pintype[value.type] + value.name.substring(1, 2).toLowerCase();
                } 
                return this.class4pintype[value.type];
            },
            pintypeclass4af(value){
                if ((value.type != 1) || (value.type === 1 && value.AFs === undefined)){
                    return this.class4pinaftype[1]
                }
                return this.class4pinaftype[0];
            },
            rotateleft(){
                if (this.rotateedge === 270){
                    this.rotateedge = 0
                } else {

                }
            },
            rotateright(value){
                this.rotateedge = this.rotateedge + value;
                this.chiplookstyle.transform = 'rotate(' + this.rotateedge + 'deg)'
            },
            rotateleft(value){
                this.rotateedge = this.rotateedge - value;
                this.chiplookstyle.transform = 'rotate(' + this.rotateedge + 'deg)'
            },
            changewidthrate(value){
                document.body.style.setProperty('--pinCount', this.chipinfo.pincount);
                document.body.style.setProperty('--sideCount', this.sidecount);
                document.body.style.setProperty('--widthRate', event.target.value);
                this.showchip = true;
            },
            redrawchip(event){
                this.chipinfo.pincount = event.target.value;
                document.body.style.setProperty('--pinCount', this.chipinfo.pincount);
                document.body.style.setProperty('--sideCount', this.sidecount);
                document.body.style.setProperty('--widthRate', this.widthrate);
                this.showchip = true;
            },
            changepackage(event){
                if (event.target.value != 'LQFP'){
                    this.chipinfo.package = 2;
                    this.chipinfo.chipbody = 'chipbodytssop'
                } else {
                    this.chipinfo.package = 1;
                    this.chipinfo.chipbody = 'chipbodylqfp'
                }

                document.body.style.setProperty('--pinCount', this.chipinfo.pincount);
                document.body.style.setProperty('--sideCount', this.sidecount);
                document.body.style.setProperty('--widthRate', this.widthrate);
                this.showchip = true;
            }
        }
    })
</script>

</html>